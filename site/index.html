<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <title>#OffsetTrump</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">

    <!-- Font Awesome -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- Default Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,100,200,300,600,500,700,800,900' rel='stylesheet' type='text/css'>

    <!-- Vitality Theme CSS -->
    <link href="css/vitality-red.css" rel="stylesheet" type="text/css">
    <link rel="icon" type="image/png" href="/img/favicon.png">

    <!-- IE8 support for HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Landing Page Demo Styles -->
    <style>
    .demo-header {
        text-align: center;
        background: url('img/fist.jpg') no-repeat center center scroll;
        color: #fff;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        background-size: cover;
        -o-background-size: cover;
        padding: 100px 0;
    }
    
    .preview-pane {
        text-align: center;
        margin-bottom: 30px;
        padding: 15px;
    }
    
    .preview-pane hr {
        max-width: 50px;
        margin: 5px auto;
    }
    
    .preview-pane a {
        color: #222;
    }
    
    .preview-pane a:focus {
        outline: none;
    }
    
    .preview-pane a img {
        -webkit-transition: all 0.5s;
        -moz-transition: all 0.5s;
        transition: all 0.5s;
    }
    
    .preview-pane a:hover img {
        opacity: 0.5;
    }
    
    .label-primary {
        background-color: #EF4035;
    }
    
    .cta-list {
        margin-top: 30px;
    }
    </style>

    <!-- Landing Page Demo Styles - FLGM overrides -->
    <style>
    .preview-pane {
        border: 1px solid black;
    }

    .pledge-container {
        padding-top: 40px;
    }

    #pledge-input {
        margin-top: 8px;
    }

    .demo-header-content {
        background-color: rgba(2, 2, 2, .5);
    }

    section {
        padding: 30px 0;
    }

    .charity {
        padding-bottom: 30px;
    }

    .about-text p {
        padding-bottom: 10px;
    }

    </style>

</head>

<body>

    <div class="demo-header">
        <div class="demo-header-content">
            <div class="container">
                <h1>Offset Trump</h1>
                <hr class="colored">
                <p>Pledge to do something good over the next four years to offset the potential negative effects of the Trump presidency</p>
            </div>
        </div>
    </div>
    <div class="container pledge-container">
        <div class="row">
            <div class="col-md-8 col-md-offset-2 container">
                <form id="new-pledge">
                    <div class="form-group row">
                        <div class="col-sm-6 text-center">
                            <input id="pledge-input" size="36" type="text" name="pledge" placeholder="I will ..."/>
                        </div>
                        <div class="col-sm-4 text-center">
                        <button type="submit" class="btn btn-primary">Submit your pledge</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="container" id="pledges"></div>

    <section class="bg-gray">
        <div class="container text-center">
            <div class="row">
                <div class="col-md-12">
                    <h1>Act Now</h1>
                    <hr class="colored">
                </div>
            </div>
            <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <p>If you have been inspired to immediate action, please consider donating to a cause which will most likely be directly affected by the president's platform.</p>
                    <p><strong>This is your excuse.</strong></p>
                </div>
            </div>
            <br />
            <div class="row charity-row">
                <div class="col-md-4 charity">
                    <a class="btn btn-primary" href="https://secure.ppaction.org/site/Donation2?df_id=12913&12913.donation=form1">Planned Parenthood</a>
                </div>
                <div class="col-md-4 charity">
                    <a class="btn btn-primary" href="https://secure3.convio.net/cfrr/site/Donation2">Center for Reproductive Rights</a>
                </div>
                <div class="col-md-4 charity">
                    <a class="btn btn-primary" href="https://secure.nrdconline.org/site/Donation2?df_id=15743&15743.donation=form1">NATURAL RESOURCES DEFENSE COUNCIL</a>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 charity">
                    <a class="btn btn-primary" href="https://secure3.convio.net/gpeace/site/Donation2?df_id=3241&3241.donation=form1">Greenpeace</a>
                </div>
                <div class="col-md-4 charity">
                    <a class="btn btn-primary" href="https://nilc.z2systems.com/np/clients/nilc/donation.jsp?campaign=15&">National Immigration Law Center</a>
                </div>
                <div class="col-md-4 charity">
                    <a class="btn btn-primary" href="https://give.thetrevorproject.org/checkout/donation">The Trevor Project</a>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h4 class="text-muted">These charities were sourced from <a href="http://time.com/money/4566160/trump-election-charities-donate/" target="blank">Time</a>. If you have other charities that you feel belong on this list, please share them with <a href="https://twitter.com/OffsetTrump">@OffsetTrump</a></h4>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="container text-center">
            <div class="row">
                <div class="col-md-12">
                    <h1>About</h1>
                    <hr class="colored">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 col-md-offset-3 about-text">
                    <p>While this site was inspired by very real concern shared by the author, his friends, and a large number of Americans about the future leader of our country, the vision of this site is to enact positive change. We aim to repurpose today's intense emotions as a catalyst for good. 
                    </p>
                    <p>We hope that the chance viewer of this site who is opposed to or frightened by the president will take the opportunity to commit to a good act or practice that they feel will make the world a better place.</p>
                    <p>If Donald turns out not to be that bad, I hope pledgers won't feel guilty about doing a good thing.</p>
                    <p>If you have concerns or suggestions about this site, please tweet civilly <a href="https://twitter.com/OffsetTrump">@OffsetTrump</a>.</p>
                </div>
            </div>
        </div>
    </section>

    <div class="hidden">
        <div id="pane-template" class="col-md-4">
            <div class="preview-pane">
                <h3 data-pledge>I will X</h3>
                <hr class="colored">
                <p data-author class="text-muted">Anonymous</p>
            </div>
        </div>
    </div>

    <script>
        var pledgesEndpoint = 'https://px4xnd5ac1.execute-api.us-east-1.amazonaws.com/dev/pledges';
        var pledgesDiv = document.getElementById('pledges');
        var pledgeTemplate = document.getElementById('pane-template');

        function refreshPledges() {
            var row;
            function addPledge(pledgeItem, i) {
                if (i % 3 === 0) {
                    row = document.createElement('div');
                    row.classList.add('row');
                    row.classList.add('content-row');
                    pledgesDiv.appendChild(row);
                }
                var pledge = pledgeTemplate.cloneNode(true);
                pledge.removeAttribute('id');
                pledge.querySelector('[data-pledge]').innerText = pledgeItem.Pledge;
                row.appendChild(pledge);
            }

            fetch(pledgesEndpoint)
                .then(function(response) { return response.json(); })
                .then(function(json) {
                    while (pledgesDiv.firstChild) {
                        pledgesDiv.removeChild(pledgesDiv.firstChild);
                    }
                    json.forEach(addPledge);
                });
        };

        var pledgeForm = document.getElementById('new-pledge');
        var pledgeInput = document.getElementById('pledge-input');
        pledgeForm.onsubmit = function(e) {
            e.preventDefault();
            var formData = new FormData(pledgeForm);

            fetch(pledgesEndpoint, {
                method: 'POST',
                body: formData
            }).then(refreshPledges)
            .then(function() {
                pledgeInput.value = '';
            });
        };
        window.onload = refreshPledges;
    </script>

</body>

</html>
